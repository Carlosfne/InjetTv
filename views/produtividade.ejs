<!DOCTYPE html>
<html lang=en>
    <head>
        <title>InjetTV - Produtividade Planta</title>
        <meta charset=UTF-8>
        <meta name=viewport content="width=device-width, initial-scale=1">
        <link rel=stylesheet href=/assets/css/materialize.min.css />
        <link rel=stylesheet href=/styles/css/produtividade.css />
        <script src=/assets/jquery.min.js></script>
        <script>
            let secondsTransition = '<%=secondsTransition%>';
            let nextPage = '<%=nextPage%>';
        </script>
        <script>
            setInterval(() => window.location.reload(), 15000);
            function pegaRadio() {
                var TempoAtt = document.getElementById("TempoAtt");
                document.getElementById("TempoAtt").onclick = function() {
                    var radios = document.getElementsByName("selTime");
                    for (var i = 0; i < radios.length; i++) {
                        if (radios[i].checked) {
                            console.log("Escolheu: " + radios[i].value);
                            setInterval(() => window.location.reload(), radios[i].value);
                        }
                    }
                };
            }
        </script>
        
    </head>
    <body style="background-color: <%=cor_fundo%>" onload="startTime()">
            <img src="<%=logo%>" alt=logo width=100 height=100>
            <main>
                <div class="row">
                    <div class="col s1">
                            <button class="light-blue darken-2 right btn waves-effect waves-light"id=clear>
                                <i class="material-icons">clear</i>                                
                                <i class="material-icons">home</i>
                            </button>
                    </div>                 
                <h1 class=center-align>Produtividade <span id=galpao></span></h1>
                <div>
                    <div class="row speedometer">
                        <div class="col l3">
                            <div class="row flex center-align">
                                <div class=canvas-container>
                                    <canvas class=Gauge id=eficiencia></canvas>
                                </div>
                            </div>
                            <div class="row center-align">
                                <strong>Eficiência (<span id=eficienciaValue><%=velocimetro.indicadores.eficiencia%></span>)</strong>
                            </div>
                        </div>
                        <div class="col l3">
                            <div class="row flex">
                                <div class=canvas-container>
                                    <canvas class=Gauge id=oee></canvas>
                                </div>
                            </div>
                            <div class="row center-align">
                                <strong>OEE (<span id=oeeValue><%=velocimetro.indicadores.indOEE%></span>)</strong>
                            </div>
                        </div>
                        <div class="col l3">
                            <div class="row flex">
                                <div class=canvas-container>
                                    <canvas class=Gauge id=utilizacao></canvas>
                                </div>
                            </div>
                            <div class="row center-align">
                                <strong>Utilização (<span id=utilizacaoValue><%=velocimetro.indicadores.indUtilizacao%></span>)</strong>
                            </div>
                        </div>
                        <div class="col l3">
                            <div class="row flex">
                                <div class=canvas-container>
                                    <canvas class=Gauge id=refugo></canvas>
                                </div>
                            </div>
                            <div class="row center-align">
                                <strong>Refugo (<span id=refugoValue><%=velocimetro.indicadores.indRef%></span>)</strong>
                            </div>
                        </div>
                    </div>
                    <div class="col l12">
                        <div class=row>
                            <table class="centered striped">
                                <thead>
                                    <th></th>
                                    <% turnos.forEach(function(turno){ %>
                                        <th><%=turno.dsTurno%></th>
                                    <% }); %>
                                    <th>Acumulado mês</th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>% Produtividade OEE</td>
                                        <% bi.indicadoresTurno.forEach(function(indicadoresTurno){ %>
                                            <td><%=indicadoresTurno.indicadores.indOEE%>%</td>
                                        <% }); %>
                                        <td><%=bi.indicadores.indOEE%>%</td>
                                    </tr>
                                    <tr>
                                        <td>% Eficiência</td>
                                        <% bi.indicadoresTurno.forEach(function(indicadoresTurno){ %>
                                            <td><%=indicadoresTurno.indicadores.eficiencia%>%</td>
                                        <% }); %>
                                        <td><%=bi.indicadores.eficiencia%>%</td>
                                    </tr>
                                    <tr>
                                        <td>% Utilização</td>
                                        <% bi.indicadoresTurno.forEach(function(indicadoresTurno){ %>
                                            <td><%=indicadoresTurno.indicadores.indUtilizacao%>%</td>
                                        <% }); %>
                                        <td><%=bi.indicadores.indUtilizacao%>%</td>
                                    </tr>
                                    <tr>
                                        <td>% Refugo</td>
                                        <% bi.indicadoresTurno.forEach(function(indicadoresTurno){ %>
                                            <td><%=indicadoresTurno.indicadores.indRef%>%</td>
                                        <% }); %>
                                        <td><%=bi.indicadores.indRef%>%</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div id="foo">
                        <span width="150" class="right" id=txt style="font-size:2.6rem; margin-right:2%" ></span>
                    </div>
                </div>
            </div>
        </main>
        <script src=/assets/jquery.min.js></script>
        <script src=/lib/gauge.js></script>
        <script src=/scripts/gauge.js></script>
        <script src=/scripts/clear.js></script>
        <script>
            function startTime() {
            var today = new Date();
            var h = today.getHours();
            var m = today.getMinutes();
            var s = today.getSeconds();
            var d = today.getDate();
            var mes = today.getMonth()+1;
            var a = today.getFullYear();
            m = checkTime(m);
            s = checkTime(s);
            document.getElementById('txt').innerHTML =
            d +"/"+ mes +"/"+a+ "-"+  h + ":" + m + ":" + s;
            var t = setTimeout(startTime, 500);
            }
            function checkTime(i) {
            if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
            return i;
            }
            </script>

    </body>
</html>